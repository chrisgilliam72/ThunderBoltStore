
@{
    Layout = "_Layout";
    ViewData["Title"] = "Suppliers";
}

@model ThunderBoltStore.ViewModels.SuppliersList

<div class="container">
    <br />
    <div class="row">
        <div class="col">
            <div class="text-center">
                <h1 class="display-5">Suppliers</h1>
            </div>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col">
            @{await Html.RenderPartialAsync("/Views/Supplier/_SuppliersTable.cshtml", @Model);}
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="float-right">
                <button type="button" class="btn btn-dark" data-toggle="modal" , data-target="#modalAddSupplier">
                    <i class="fa fa-plus-square"></i> Add Supplier
                </button>
            </div>
        </div>
    </div>

    <form id="AddSupplier" data-ajax="true" data-ajax-mode="replace" data-ajax-update="#divTableSuppliers" asp-action="AddSupplier" asp-controller="Supplier" role="form" data-ajax-method="post">
            <div class="modal fade" id="modalAddSupplier">
                <div class="modal-dialog modal-dialog-centered" role="dialog">
                    <div class="modal-content">
                        <div class="modal-header" style="background-image: linear-gradient(to bottom,#ffd89b, #19547b);">
                            <h6 class="modal-title" id="exampleModalLabel">   <i class="fas fa-box">&nbsp;</i>New Product</h6>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" style="background-image: linear-gradient(to bottom, #4B79A1, #283E51);">
                           @{ await Html.RenderPartialAsync("/Views/Supplier/_SupplierDetail.cshtml", new Supplier() { IsActive = true });}
                        </div>
                        <div class="modal-footer bg-modal-footer" style="background-image: linear-gradient(to bottom,#ffd89b, #19547b);">
                            <button id="btnAddSupplier" type="submit" name="btnSave" class="btn-sm btn-dark">
                                <i class="far fa-save"></i> Save
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.min.js"></script>
    <script type="text/javascript">
        $(document).on('click', "[id*='btnEditSupplier']", function (e) {
            //var lastChar = this.id[this.id.length - 1];
            //var ModalID = "#modalUpdate".concat(lastChar);
            //var frmID = "#frmUpdate".concat(lastChar)
            //var form = $(frmID);
            //form.validate();
            //if (form.valid()) {
            //    $(ModalID).modal('hide')
            //    $('body').removeClass('modal-open');
                $('.modal-backdrop').remove();

           // }
        })

        $(document).on('click', "[id*='btnEditSupplier']", function (e) {
            //var lastChar = this.id[this.id.length - 1];
            //var ModalID = "#modalUpdate".concat(lastChar);
            //var frmID = "#frmUpdate".concat(lastChar)
            //var form = $(frmID);
            //form.validate();
            //if (form.valid()) {
            //    $(ModalID).modal('hide')
            //    $('body').removeClass('modal-open');
            $('.modal-backdrop').remove();

            // }
        })

        $(document).on('click', "[id*='btnAddSupplier']", function (e) {
            var form = $("#AddSupplier");
            alert("add supplier")
            if (form.valid()) {
                var ModalID = "#modalAddSupplier";
                $(ModalID).modal('hide')
                $('body').removeClass('modal-open');
                $('.modal-backdrop').remove();
            }
        })
    </script>
}